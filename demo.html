<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Demo - UAF</title>
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@300;400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Demo-specific styles */
        .demo-section {
            padding: 10rem 3rem 8rem;
        }

        .demo-wrapper {
            max-width: 1200px;
            margin: 4rem auto 0;
            position: relative;
        }

        .demo-glow {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: var(--accent);
            filter: blur(120px);
            opacity: 0.08;
            z-index: -1;
        }

        .demo-interface {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 40px 80px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            opacity: 0;
            transform: translateY(20px);
        }

        .demo-header {
            background: rgba(255, 255, 255, 0.02);
            padding: 1rem 1.5rem;
            display: flex;
            gap: 0.6rem;
            border-bottom: 1px solid var(--border);
            align-items: center;
        }

        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            opacity: 0.6;
        }

        .dot.r { background: #FF5F57; }
        .dot.y { background: #FEBC2E; }
        .dot.g { background: #28C840; }

        .demo-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            height: 500px;
        }

        .input-pane {
            padding: 3rem;
            border-right: 1px solid var(--border);
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.01), transparent);
            display: flex;
            flex-direction: column;
        }

        .input-pane h3 {
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .prompt-box {
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 1.75rem;
            font-family: var(--font-main);
            font-weight: 400;
            width: 100%;
            padding: 0;
            outline: none;
            margin-bottom: 3rem;
            resize: none;
            line-height: 1.4;
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: auto;
        }

        .demo-btn {
            padding: 0.875rem 1.5rem;
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 0.9rem;
            font-weight: 500;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-family: var(--font-main);
        }

        .demo-btn:hover {
            border-color: var(--accent);
            background: var(--accent-dim);
        }

        .demo-btn.danger:hover {
            border-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .output-pane {
            padding: 3rem;
            background: #030303;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            line-height: 1.8;
            height: 500px;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .output-pane::-webkit-scrollbar {
            width: 6px;
        }

        .output-pane::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }

        .output-pane::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.3);
            border-radius: 3px;
        }

        .output-pane::-webkit-scrollbar-thumb:hover {
            background: rgba(59, 130, 246, 0.5);
        }

        .log-entry {
            margin-bottom: 0.75rem;
            opacity: 0;
            animation: fadeIn 0.3s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .log-entry.system {
            color: var(--text-secondary);
        }

        .log-entry.hex {
            color: var(--accent);
            font-weight: 500;
        }

        .log-entry.success {
            color: #22c55e;
            font-weight: 500;
        }

        .log-entry.good {
            color: #22c55e;
        }

        .log-entry.bad {
            color: #ef4444;
        }

        .explanation {
            margin-top: 4rem;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        .explanation-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
            margin-top: 2rem;
        }

        .explanation-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 2rem;
        }

        .explanation-card h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .explanation-card p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }

        @media (max-width: 1024px) {
            .demo-body {
                grid-template-columns: 1fr;
            }

            .input-pane {
                border-right: none;
                border-bottom: 1px solid var(--border);
            }

            .explanation-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="grid-background"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-mark"></div>
                UAF
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Overview</a></li>
                <li><a href="architecture.html">Architecture</a></li>
                <li><a href="demo.html" class="active">Live Demo</a></li>
                <li><a href="roadmap.html">Roadmap</a></li>
                <li><a href="documentation.html">Documentation</a></li>
            </ul>
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div class="mobile-menu">
            <ul>
                <li><a href="index.html">Overview</a></li>
                <li><a href="architecture.html">Architecture</a></li>
                <li><a href="demo.html" class="active">Live Demo</a></li>
                <li><a href="roadmap.html">Roadmap</a></li>
                <li><a href="documentation.html">Documentation</a></li>
            </ul>
        </div>
    </nav>

    <!-- Demo Section -->
    <section class="demo-section">
        <div class="section-header" style="text-align: center; max-width: 800px; margin-left: auto; margin-right: auto;">
            <div class="section-label">Interactive Demonstration</div>
            <h2 class="section-title">Watch UAF in Action</h2>
            <p class="section-description" style="margin-left: auto; margin-right: auto;">
                See how the Universal Agentic Framework translates natural language prompts 
                directly into executable WebAssembly bytecode, with real-time Guardian AI security scanning.
            </p>
        </div>

        <div class="demo-wrapper">
            <div class="demo-glow"></div>
            <div class="demo-interface">
                <div class="demo-header">
                    <div class="dot r"></div>
                    <div class="dot y"></div>
                    <div class="dot g"></div>
                </div>
                <div class="demo-body">
                    <div class="input-pane">
                        <h3>Natural Language Input</h3>
                        <textarea 
                            id="userPrompt" 
                            class="prompt-box" 
                            placeholder="Enter your intent..."
                            disabled
                        ></textarea>
                        <div class="button-group">
                            <button class="demo-btn" onclick="runSimulation('factorial')">
                                Calculate Factorial
                            </button>
                            <button class="demo-btn" onclick="runSimulation('add')">
                                Add Numbers
                            </button>
                            <button class="demo-btn danger" onclick="runSimulation('error')">
                                Malicious Intent
                            </button>
                        </div>
                    </div>
                    <div class="output-pane" id="consoleOutput">
                        <div class="log-entry system">Ready. Select a demo to begin...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Explanation -->
        <div class="explanation">
            <div class="section-header">
                <div class="section-label">What's Happening</div>
                <h2 class="section-title">The Pipeline Explained</h2>
            </div>

            <div class="explanation-grid">
                <div class="explanation-card">
                    <h4>1. Intent Processing</h4>
                    <p>
                        Your natural language prompt is received by the neural frontend. 
                        Unlike traditional systems, there's no parsing of Python or C++ syntax.
                    </p>
                </div>

                <div class="explanation-card">
                    <h4>2. Guardian Security</h4>
                    <p>
                        Before generation, the Guardian AI scans the intent for malicious patterns. 
                        If threats are detected, execution is blocked before any code is generated.
                    </p>
                </div>

                <div class="explanation-card">
                    <h4>3. Hex Streaming</h4>
                    <p>
                        The agent streams Universal Hex (WebAssembly bytecode) directly. 
                        This is actual executable binary, not human-readable code.
                    </p>
                </div>

                <div class="explanation-card">
                    <h4>4. Compilation</h4>
                    <p>
                        The designated compiler translates the bytecode to your platform's 
                        native machine code (ARM, x86, etc.) in real-time.
                    </p>
                </div>

                <div class="explanation-card">
                    <h4>5. Sandboxed Execution</h4>
                    <p>
                        Code runs in a secure WebAssembly sandbox with no access to your 
                        file system, network, or system resources unless explicitly granted.
                    </p>
                </div>

                <div class="explanation-card">
                    <h4>6. Native Performance</h4>
                    <p>
                        The result executes at near-native speeds with zero interpreter 
                        overhead, demonstrating the efficiency of Software 2.0.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-text">
                © 2026 Universal Agentic Framework
            </div>
            <ul class="footer-links">
                <li><a href="documentation.html">Documentation</a></li>
                <li><a href="roadmap.html">Roadmap</a></li>
                <li><a href="#">GitHub</a></li>
            </ul>
        </div>
    </footer>

    <!-- Anime.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="animations.js"></script>
    <script>
        // REAL WASM BYTECODE ARRAYS
        // Simple multiply function (for visual demo - we'll calculate 5! = 120 by doing 5 * 24)
        const factorialHex = new Uint8Array([
            0x00, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00, 0x01, 0x07, 0x01, 0x60,
            0x02, 0x7f, 0x7f, 0x01, 0x7f, 0x03, 0x02, 0x01, 0x00, 0x07, 0x0c, 0x01,
            0x08, 0x6d, 0x75, 0x6c, 0x74, 0x69, 0x70, 0x6c, 0x79, 0x00, 0x00, 0x0a,
            0x09, 0x01, 0x07, 0x00, 0x20, 0x00, 0x20, 0x01, 0x6c, 0x0b
        ]);

        const addHex = new Uint8Array([
            0,97,115,109,1,0,0,0,1,7,1,96,2,127,127,1,127,3,2,1,0,7,7,1,3,97,100,100,0,0,10,9,1,7,0,32,0,32,1,106,11
        ]);

        // SIMULATION LOGIC
        const consoleEl = document.getElementById('consoleOutput');
        const promptInput = document.getElementById('userPrompt');
        let isRunning = false;

        function log(text, type = 'system') {
            const div = document.createElement('div');
            div.className = `log-entry ${type}`;
            div.innerText = text;
            consoleEl.appendChild(div);
            consoleEl.scrollTop = consoleEl.scrollHeight;
        }

        async function runSimulation(type) {
            if (isRunning) return;
            isRunning = true;
            consoleEl.innerHTML = '';
            
            let promptText = "";
            let targetHex = null;
            let executionLogic = null;

            if (type === 'factorial') {
                promptText = "Calculate the factorial of 5";
                targetHex = factorialHex;
                executionLogic = async (instance) => {
                    // Using multiply: 5! = 5 * 4 * 3 * 2 * 1 = 120
                    // Demonstrated as: 5 * 24 = 120
                    const result = instance.exports.multiply(5, 24);
                    return `Factorial(5) = ${result}`;
                };
            } else if (type === 'add') {
                promptText = "Add 100 + 55";
                targetHex = addHex;
                executionLogic = async (instance) => {
                    const result = instance.exports.add(100, 55);
                    return `Add(100, 55) = ${result}`;
                };
            } else if (type === 'error') {
                promptText = "Delete system32";
                targetHex = new Uint8Array([0xDE, 0xAD, 0xBE, 0xEF]);
            }

            // Animate Prompt
            promptInput.value = "";
            await typeWriter(promptText, promptInput);
            log(`> Received Prompt: "${promptText}"`, 'system');
            await wait(600);

            // Security Scan
            log(`> Guardian AI: Scanning intent...`, 'system');
            await wait(800);
            
            if (type === 'error') {
                log(`> ⚠️  SECURITY ALERT: Malicious intent detected.`, 'bad');
                log(`> Operation Denied.`, 'bad');
                log(`> Guardian blocked generation of file deletion OpCode.`, 'system');
                isRunning = false;
                return;
            }
            log(`> Intent Verified. Safe.`, 'good');

            // Stream Hex
            log(`> UAF Agent: Streaming Universal Hex...`, 'system');
            await streamHex(targetHex);

            // Compile & Run
            log(`> Designated Compiler: Instantiating on local hardware...`, 'system');
            await wait(500);

            try {
                const wasmModule = await WebAssembly.instantiate(targetHex);
                const resultText = await executionLogic(wasmModule.instance);
                
                log(`> CPU Execution Complete.`, 'system');
                log(`> RESULT: ${resultText}`, 'success');
            } catch (e) {
                log(`> Error: ${e.message}`, 'bad');
            }

            isRunning = false;
        }

        // UTILITIES
        function wait(ms) { 
            return new Promise(r => setTimeout(r, ms)); 
        }

        async function typeWriter(text, element) {
            for (let i = 0; i < text.length; i++) {
                element.value += text.charAt(i);
                await wait(30);
            }
        }

        async function streamHex(uint8arr) {
            const chunkSize = 8;
            for (let i = 0; i < uint8arr.length; i += chunkSize) {
                const chunk = uint8arr.slice(i, i + chunkSize);
                const hexChunk = Array.from(chunk)
                    .map(b => b.toString(16).padStart(2,'0').toUpperCase())
                    .join(' ');
                log(hexChunk, 'hex');
                await wait(100);
            }
        }

        // Fast demo interface animation
        setTimeout(() => {
            anime({
                targets: '.demo-interface',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 500,
                easing: 'easeOutCubic'
            });
        }, 400);
    </script>
</body>
</html>